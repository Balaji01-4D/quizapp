/* Prevent text selection on quiz UI */
#quiz, #quiz * {
  user-select: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
}
:root{
  --bg1:#0b0120; --accent1:#7b2cff; --accent2:#3ac3ff; --card:#ffffffee;
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:'Poppins',sans-serif;background:linear-gradient(180deg,#0b0120,#2b0e4a); overflow:hidden}
/* background image layer */
body::after{
  content:"";
  position:fixed; inset:0;
  /* Wallpaper as base, semi-transparent gradient overlay */
  background:
    url("assets/wallpaper-purple.png") center center/contain no-repeat,
    linear-gradient(180deg, rgba(26,0,51,0.82) 0%, rgba(42,0,68,0.82) 100%);
  z-index:0; pointer-events:none; filter:contrast(1.04) saturate(1.06);
}

/* fixed user badge */
.user-badge{position:fixed; top:12px; left:12px; z-index:70; display:flex; align-items:center; gap:10px; backdrop-filter: blur(8px); background: linear-gradient(135deg, rgba(255,255,255,0.92), rgba(237,245,255,0.92)); border:1px solid rgba(123,44,255,0.18); border-radius: 14px; padding: 8px 12px 8px 8px; box-shadow: 0 14px 30px rgba(3,2,20,0.22); color:#1d1d1f; min-width: 220px}
.user-badge .ub-avatar{width:32px; height:32px; border-radius:50%; display:flex; align-items:center; justify-content:center; background: linear-gradient(135deg, var(--accent1), var(--accent2)); color:#fff; font-weight:700; font-size:14px; box-shadow: 0 6px 16px rgba(123,44,255,0.25)}
.user-badge .ub-meta{display:flex; flex-direction:column}
.user-badge .user-line{font-weight:600; font-size: 13px; line-height: 1.2}
.user-badge .user-line small{font-weight:600}
.user-badge .user-line.small{font-weight:500; font-size: 12px; opacity: .85}
.user-badge .ub-clear{margin-left:auto; appearance:none; border:none; background:transparent; color:#5b5b66; font-size:16px; line-height:1; padding:4px; cursor:pointer; border-radius:8px}
.user-badge .ub-clear:hover{background:rgba(0,0,0,0.06)}

/* intro */
#intro-screen{position:fixed;inset:0;z-index:50;display:flex;align-items:center;justify-content:center;background:#000}
#intro-screen video{position:absolute; inset:0; width:100%; height:100%; object-fit:cover}
.intro-overlay{position:relative;z-index:60;display:flex;align-items:center;justify-content:center}
.intro-text{font-size:4rem;color:var(--accent2);letter-spacing:1px}
.glow{color:var(--accent2); text-shadow:0 0 12px rgba(58,195,255,0.28), 0 0 32px rgba(123,44,255,0.14)}

/* app/main */
#app{position:relative; z-index:10; height:100vh; display:flex; align-items:center; justify-content:center; padding:24px}

/* macOS-like window */
.window{width:min(1100px,96vw); height:min(720px,92vh); background:rgba(255,255,255,0.08); border-radius:18px; overflow:hidden; box-shadow:0 40px 120px rgba(10,0,30,0.55), 0 2px 0 rgba(255,255,255,0.06) inset; backdrop-filter: blur(16px); border:1px solid rgba(255,255,255,0.08)}
.titlebar{height:48px; display:flex; align-items:center; gap:12px; padding:0 16px; background:linear-gradient(180deg, rgba(33,0,74,0.65), rgba(14,0,40,0.65)); border-bottom:1px solid rgba(255,255,255,0.08)}
.traffic{display:flex; gap:8px}
.dot{width:12px;height:12px;border-radius:50%}
.dot.red{background:#ff5f57}
.dot.yellow{background:#febc2e}
.dot.green{background:#28c840}
.title{font-weight:700;color:#e6e6f0}

.window-body{display:grid; grid-template-columns: 270px 1fr; height: calc(100% - 48px)}
.sidebar{background:linear-gradient(180deg, rgba(23,0,54,0.45), rgba(14,0,40,0.45)); padding:14px 10px; border-right:1px solid rgba(255,255,255,0.08); color:#e8e6ff}
.nav{display:flex; flex-direction:column; gap:4px}
.nav .item{display:flex; align-items:center; gap:12px; padding:10px 12px; border-radius:12px; cursor:pointer; color:#e6defa; user-select:none}
.nav .item .ico{width:20px; text-align:center; opacity:.9}
.nav .item:hover{background:rgba(255,255,255,0.08)}
.nav .item.active{background:rgba(255,255,255,0.12); color:#fff}

.content{background:linear-gradient(180deg, rgba(255,255,255,0.95), rgba(245,248,255,0.96)); height:100%; overflow:auto; padding:22px; display:flex; justify-content:center; align-items:flex-start}

/* panel & card */
.panel{display:block; padding:10px; text-align:center}
.hidden{display:none}
.card{background:linear-gradient(180deg, rgba(255,255,255,0.95), rgba(255,255,255,0.9)); border-radius:16px; padding:28px; box-shadow:0 30px 60px rgba(3,2,20,0.6); width:min(920px,95%);}

/* welcome */
.welcome-card{padding:40px}
.title{font-size:28px;color:var(--accent1); margin:0}
.glow-large{font-size:40px;color:var(--accent1); text-shadow:0 10px 40px rgba(123,44,255,0.12)}
.subtitle{color:#222;margin-top:10px}

/* registration */
.reg-card .form-row{display:flex;gap:12px;margin:12px 0;flex-wrap:wrap}
.reg-card input{flex:1;padding:12px 14px;border-radius:10px;border:1px solid rgba(0,0,0,0.06); font-size:15px; background:#fff; outline:none; transition:border .15s, box-shadow .15s}
.reg-card input:focus{border-color: rgba(123,44,255,0.45); box-shadow: 0 0 0 4px rgba(123,44,255,0.12)}
.actions{display:flex;gap:12px;justify-content:center;margin-top:12px}
.btn{padding:10px 18px;border-radius:10px;border:none;cursor:pointer;background:linear-gradient(90deg,var(--accent1),var(--accent2));color:white;font-weight:700;box-shadow:0 12px 30px rgba(59,195,255,0.16); transition: transform .12s ease, box-shadow .12s ease}
.btn:hover{transform: translateY(-1px); box-shadow:0 16px 34px rgba(59,195,255,0.24)}
.btn.small{padding:8px 14px;font-size:14px}
.hidden{display:none}
.status{margin-top:8px;color:#333}

/* quiz */
.quiz-card{display:flex;flex-direction:column;gap:16px}
.quiz-header{display:flex;align-items:center;justify-content:space-between;gap:16px}
.quiz-header .q-title{font-weight:600;color:#2a2a35}
.progress{flex:1}
.progress .progress-meta{display:flex;align-items:center;justify-content:space-between; margin-bottom:6px; color:#4a4862; font-weight:600}
.progress-bar{height:10px;background:linear-gradient(180deg,#edf1ff,#e9f7ff); border-radius:999px; overflow:hidden; border:1px solid rgba(0,0,0,0.06)}
#progress-fill{height:100%; width:0%; background:linear-gradient(90deg,var(--accent1),var(--accent2)); transition:width .25s ease}
.question-box{background:linear-gradient(180deg,#fff,#f7fbff);padding:18px;border-radius:12px;box-shadow:0 18px 40px rgba(3,2,20,0.08)}
#question-text{color:var(--accent1);font-size:20px;margin:0}
.options{display:flex;flex-direction:column;gap:10px;margin-top:12px}
.option{padding:12px;border-radius:10px;background:linear-gradient(180deg,#fff,#f6faff);cursor:pointer;border-left:6px solid transparent;transition:all .18s}
.option:hover{transform:translateY(-6px);box-shadow:0 18px 40px rgba(3,2,20,0.12)}
.option.selected{border-left-color:var(--accent1);background:linear-gradient(180deg,#f2eaff,#eefaff)}

.quiz-footer{display:flex;justify-content:space-between;align-items:center}
.timer{font-weight:600;color:#222}

/* leaderboard layout: extend background and prevent overflow */
#leaderboard .card{width:min(1100px,96vw); padding:0; overflow:hidden; border-radius:16px; background:linear-gradient(180deg, rgba(255,255,255,0.98), rgba(255,255,255,0.94)); box-shadow:0 30px 80px rgba(3,2,20,0.35)}
#leaderboard .card .title{margin:0; padding:20px; background:linear-gradient(180deg,#f2ecff,#eef7ff); border-bottom:1px solid rgba(0,0,0,0.06); font-size:32px}
#leaderboard #leaderboard-table{padding:0}
#leaderboard .card .status{padding:12px 16px}
#leaderboard .card .btn.small{margin:12px auto 20px; display:inline-block}

/* leaderboard table */
.lb-table{width:100%; border-collapse:separate; border-spacing:0; margin:0; background:linear-gradient(180deg,#fff,#f7fbff)}
.lb-table thead th{position:sticky; top:0; background:linear-gradient(90deg, rgba(123,44,255,0.16), rgba(58,195,255,0.16)); color:#3b2b6b; font-weight:700; letter-spacing:.3px; font-size:14px}
.lb-table th,.lb-table td{padding:12px 14px; border-bottom:1px solid rgba(0,0,0,0.06); text-align:center}
.lb-table tbody tr:nth-child(odd){background:rgba(0,0,0,0.02)}
.lb-table tbody tr:hover{background:rgba(123,44,255,0.06)}
.lb-table tbody tr.highlight{background:#e0e7ff}

/* animations */
.slide-in{animation:slideIn .45s ease both}
@keyframes slideIn{from{transform:translateX(30px);opacity:0}to{transform:translateX(0);opacity:1}}
@keyframes pop {
  0% {transform: scale(.9); opacity: 0;}
  60% {transform: scale(1.04);}
  100% {transform: scale(1); opacity: 1;}
}
